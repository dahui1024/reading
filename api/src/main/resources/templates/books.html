<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="header :: common_header(~{::title},~{::link})">
    <title>[( ${book.name} )] ([( ${book.author} )])- 烂白菜</title>
    <meta name="description" content="[[${word}]]，[[${book.description}]]">
    <link/>
</head>
<body>
<nav class="navbar navbar-default navbar-inverse">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">烂白菜</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/" title="烂白菜">烂白菜</a>
        </div>
        <p class="navbar-text">
            <a href="/books/rank/page_score" title="网络新鲜榜" class="navbar-link">网络新鲜榜</a>
        </p>
    </div>
</nav>
<div class="container" style="margin-top: 20px;">
    <div class="media">
        <div class="media-left">
            <a href="#">
                <img class="media-object" height="128px"  th:src="${book.cpImageUrl}" th:alt="${book.name}">
            </a>
        </div>
        <div class="media-body">
            <h4 class="media-heading">
                <a th:href="@{/search?word={word}(word=${book.name})}" th:title="${book.name}">[[${book.name}]]</a>
                &nbsp;&nbsp;<small th:text="${book.author}"></small>
            </h4>
            <p class="lead">新鲜度：<b>[[${book.pageScore / 10.0}]]</b></p>
            [[${book.description}]]
        </div>
    </div>
    <hr/>
    <div id="chart"></div>
    <p>来源：[[${book.cpName}]]</p>
    <p>标签：[[${book.tags}]]</p>
    <p>签约：[[${book.isSign == 1} ? '已签约' : '未签约']]</p>
    <p>状态：[[${book.isFinish == 1} ? '完结' : '连载']]</p>
    <p>收费：[[${book.isVip == 1} ? '收费' : '免费']]</p>
    <p>源链接：[[${book.cpUrl}]]</p>
    <hr/>
    <p class="lead">同名推荐</p>
    <ol>
        <li th:each="book : ${recommendBooks}">
            <p><a th:href="@{/search?word={word}(word=${book.name})}">[[${book.name}]]&nbsp;&nbsp;</a><small>新鲜度：[[${book.pageScore / 10.0}]]</small></p>
        </li>
    </ol>
</div>
<footer th:replace="footer :: common_footer()"></footer>
<script src="/js/frappe-charts.min.iife.js" ></script>x
<script>
  var labels = ['[(${#strings.arrayJoin(labels, "','")})]'];
  var values = [ [(${#strings.arrayJoin(values, ",")})] ];
  // Javascript
  let data = {
    labels: labels,

    datasets: [
      {
        title: "[(${book.name})]",
        color: "light-blue",
        values: values
      }
    ]
  };

  let chart = new Chart({
    parent: "#chart",
    title: "月新鲜度",
    data: data,
    type: 'line',
    height: 250
  });

  chart.show_averages();

</script>
</body>
</html>